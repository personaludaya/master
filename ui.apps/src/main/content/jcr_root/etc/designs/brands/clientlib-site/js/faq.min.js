"use strict";var $=require("jquery"),shared_1=require("./shared"),shared_2=require("./shared"),faqTempalate=require("faq-container-partial"),Swiper=require("swiper"),Faq=function(){function e(){var e=this;this.wrapperClassName=".js-faq-content-wrapper",this.loader=new shared_2.Loader,this.defaultEndpoint="",this.toolbarClassName=".js-faq-category-toolbar-container",$(document).ready(function(){e.init()})}return e.prototype.init=function(){var e=this,a=this;$(document).ready(function(){e.defaultEndpoint=$(".faq-category-list .btn-action").attr("data-url"),new Swiper(e.toolbarClassName,{loop:!1,nextButton:".faq-next",prevButton:".faq-prev",slidesPerView:4,paginationClickable:!0,centeredSlides:!1,spaceBetween:10,breakpoints:{1024:{slidesPerView:3},767:{slidesPerView:1}},onInit:function(a){$(e.toolbarClassName).css("opacity",1)},onSlideChangeEnd:function(e){window.brands.tracker&&window.brands.tracker.trackCarousel(e)}}),$(".faq--category a").each(function(e,t){$(t).on("click",function(e){var r=$(t).attr("data-url"),n=$(t).text();r&&($(".faq--category a.btn-action").addClass("btn-default"),$(".faq--category a.btn-action").removeClass("btn-action"),$(t).addClass("btn-action"),window.brands.tracker&&window.brands.tracker.trackFAQCategory(n),a.render(r).then(function(e){$(a.wrapperClassName).html(e),a.postRender()}))})}),e.render(e.defaultEndpoint).then(function(a){$(e.wrapperClassName).html(a),e.postRender()})})},e.prototype.postRender=function(){new shared_1.AccordionComponent("faqaccordion")},e.prototype.render=function(e){var a=this;this.loader.show(this.wrapperClassName);var t="",r=$.Deferred();return $.get(e).success(function(e){if(!e.faqs)return r.reject(new Error("Invalid Data"));for(var n=function(e){if(e&&!(e.length<1)){for(var a="<ul>",t=0;t<e.length;t++)a+="<li>"+e[t].text+"</li>",e[t].children&&e[t].children.length>0&&(a+='<li class="children">',a+=n(e[t].children),a+="</li>");return a+="</ul>"}},i=0;i<e.faqs.faqList.length;i++){var o=e.faqs.faqList[i];"bulletList"in o&&o.bulletList.length>0&&(o.content+='<article class="campaign-text bullet-list">',o.content+=n(o.bulletList),o.content+="</article>")}t+=faqTempalate.template({header:e.faqs.header,faqList:e.faqs.faqList,arrowDown:window.brands.icons.arrowDown,arrowUp:window.brands.icons.arrowUp}),a.loader.hide(a.wrapperClassName),r.resolve(t)}).error(function(e){a.loader.hide(a.wrapperClassName),r.reject(e)}),r.promise()},e}();exports.Faq=Faq,new Faq;