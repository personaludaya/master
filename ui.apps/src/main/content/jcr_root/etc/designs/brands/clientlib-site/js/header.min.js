"use strict";var $=require("jquery");require("bootstrap"),require("chatbot-container.js");var shared_1=require("./shared"),Header=function(){function e(){this.dataMenuId="menu-id",this.lastScrollPosition=0,this.homeScreen=".home-screen",this.cookiePolicy=".cookie-policy",this.header=".header",this.loader=new shared_1.Loader,this.loaderWrapper=".loader",this.utils=new shared_1.Utils,this.init()}return e.prototype.init=function(){var e=this;$(document).ready(function(){$.cookie("cookiepolicy")||$(e.cookiePolicy).show(),1==$(".btnsearch:visible").data("disabled")&&(e.loader.show(e.loaderWrapper),$(".btnsearch:visible").addClass("selected-search-icon"),$("#btnsubmenu").addClass("low-index"),$(".btnsubmenu").show(),$("#search-box").show(),$("#search-box").focus()),$(".btnchatbot:visible").on("click",function(a){if($(window).width()<=window.brands.mobile_screen&&$(".chatbot-component").hide(),"none"==$("#chatbot-global").css("display")){$(a.currentTarget).addClass("active"),$("#chatbot-global").removeClass("hide").addClass("show"),e.utils.chatbotUserInteraction(),$(".navbar-collapse").removeClass("in"),$(document.body).removeClass("no-scroll");var o={event:{eventInfo:{eventType:"chatbot_initiate",eventName:"header|search"}},search:{category:{primaryCategory:"Chat Bot"},attributes:{source:location.href}}};window.brands.tracker&&window.brands.tracker.customTrack(o)}else $("#chatbot-global").removeClass("show").addClass("hide"),$(a.currentTarget).removeClass("active")}),$("#closeglobalchatbot").on("click",function(e){window.brands.chatbot.chatbotNoInteractionTimer&&clearTimeout(window.brands.chatbot.chatbotNoInteractionTimer),$(window).width()<=window.brands.mobile_screen&&($(".chatbot-component").show(),$("#header").height("auto")),$("#chatbot-global").removeClass("show").addClass("hide"),$(".btnchatbot:visible").removeClass("active")}),$("#closemenu").on("click",function(e){$(".navbar-collapse").removeClass("in"),$(document.body).removeClass("no-scroll")}),$(".btn-toggle-menu").on("click",function(e){1!=$(".btnsearch:visible").data("disabled")&&($("#search-box").hide(),$(".btnsubmenu").hide())}),$(".btnsearch:visible").on("click",function(a){if(1==$(".btnsearch:visible").data("disabled"));else if($(".submenu").hide(),$(".nav-brands li").removeClass("active"),$(".submenu").find("[data-"+e.dataMenuId+'="'+e.prevSelectedMenu+'"]').addClass("hide"),e.prevSelectedMenu="","none"==$("#btnsubmenu").css("display")){$(".navbar-collapse").removeClass("in"),$(document.body).removeClass("no-scroll"),$(".btnsubmenu").show(),$("#search-box").show(),$(".form-control.search-box-control").focus();var o={event:{eventInfo:{eventType:"internalsearch_initiate",eventName:"header|search"}},search:{category:{primaryCategory:"Internal Search"},attributes:{source:location.href}}};window.brands.tracker&&window.brands.tracker.customTrack(o),$(window).width()<=window.brands.mobile_screen&&$(document.body).off().on("click, touchstart",function(e){if(!$(e.target).hasClass("search-box-control")&&"none"!=$("#search-box").css("display")){$("#search-box").hide(),$(document.body).unbind("click, touchstart"),document.activeElement&&$(document.activeElement).blur();for(var a=document.querySelectorAll("input"),o=0;o<a.length;o++)a[o].blur()}})}else $("#search-box").hide(),$(".btnsubmenu").hide()}),$(".search-result-container").length>0&&$("#search-box").slideDown(),$(".nav-brands a").hover(function(a){var o=$(a.target).data(e.dataMenuId);1!=$(".btnsearch:visible").data("disabled")&&($("#search-box").hide(),$(".btnsubmenu").hide()),e.prevSelectedMenu!=o&&(e.prevSelectedMenu&&$(".submenu").find("[data-"+e.dataMenuId+'="'+e.prevSelectedMenu+'"]').length>0&&($(".submenu").hide(),$(".submenu").find("[data-"+e.dataMenuId+'="'+e.prevSelectedMenu+'"]').addClass("hide"),$(".nav-brands li").find("[data-"+e.dataMenuId+'="'+e.prevSelectedMenu+'"]').parent().removeClass("active"),e.prevSelectedMenu=""),$(".submenu").find("[data-"+e.dataMenuId+'="'+o+'"]').length>0&&($(a.target).parent().addClass("active"),$(".submenu").find("[data-"+e.dataMenuId+'="'+o+'"]').removeClass("hide"),$(".submenu").show(),e.prevSelectedMenu=o))}),$(".submenu").mouseleave(function(a){$(".submenu").hide(),$(".nav-brands li").removeClass("active"),$(".submenu").find("[data-"+e.dataMenuId+'="'+e.prevSelectedMenu+'"]').addClass("hide"),e.prevSelectedMenu=""}),$(".btn-toggle-menu").on("click",function(e){$("#header").removeClass("fixed"),$(document.body).addClass("no-scroll")}),$("#closecookiepolicy").on("click",function(a){$(e.cookiePolicy).remove(),$(e.header).removeClass("with-cookiepolicy"),$(e.cookiePolicy).removeClass("fixed"),$(e.homeScreen).removeClass("with-cookiepolicy"),$.cookie("cookiepolicy",1)}),$(window).scroll(function(a){var o=$(window).scrollTop();o<=e.lastScrollPosition&&($("#header").visible()||$("#chatbot-global").find(".message-group").visible()||$(".navbar-collapse").hasClass("in")||$("#header").addClass("fixed")),o<=80&&$("#header").removeClass("fixed"),$("#chatbot-global").find(".message-group").visible()||$(window).width()>window.brands.mobile_screen&&($("#chatbot-global").removeClass("show").addClass("hide"),$(".btnchatbot:visible").removeClass("active")),e.lastScrollPosition=o})})},e}();new Header;