"use strict";var $=require("jquery"),Swiper=require("swiper");require("jquery.visible");var Home=function(){function e(){this.homeScreen=".home-screen",this.cookiePolicy=".cookie-policy",this.header=".header",this.productInfoImageSelector=".product-info-image",this.popularProductSelector=".js-popular-products",this.shareBtnSelector=".at-share-dock",this.homeScreenSelector=".home--screen",this.init()}return e.prototype.init=function(){var e=this;$(document).ready(function(){$.cookie("cookiepolicy")||($(e.header).addClass("with-cookiepolicy"),$(e.cookiePolicy).addClass("fixed"),$(e.homeScreen).addClass("with-cookiepolicy"));var o=new Swiper(e.homeScreen,{loop:!1,resistance:!1,resistanceRatio:0,shortSwipes:!0,longSwipes:!1,followFinger:!1,direction:"vertical",slidesPerView:1,paginationClickable:!0,spaceBetween:0,mousewheelInvert:!0,keyboardControl:!0,mousewheelControl:!0,mousewheelForceToAxis:!0,mousewheelReleaseOnEdges:!0,progress:!1,parallax:!1,speed:750,noSwiping:!0,virtualTranslate:!1,coverflow:{rotate:10,stretch:0,depth:10,modifier:1,slideShadows:!1},onInit:function(o){o.lockSwipeToPrev(),$(".home--screen2").length>0&&$(e.productInfoImageSelector).length>0&&$(e.popularProductSelector).length>0&&$(e.popularProductSelector).find(".swiper-next, .swiper-prev").css({top:$(".popular-product-info-content").position().top+($(".popular-product-info-content").find(e.productInfoImageSelector).height()+$(e.popularProductSelector).find(".swiper-next, .swiper-prev").height())/2}),$(".home--screen5").closest(".swiper-slide").addClass("swiper-no-swiping"),$(".home-screen").find(".section-container").first().find(".background-container").find(".hero-canvas").remove(),$(".home-screen").find(".section-container").first().find(".background-container").prepend('<div class="hero-canvas"></div>'),window.brands.anime.drawOnCanvas($(".home-screen").find(".section-container").first())},onTransitionStart:function(o){var n=e.homeScreenSelector+(o.activeIndex+1);$(n).length>0&&($(n).find(".background-container").find(".hero-canvas").remove(),1==o.activeIndex?$(n).find(".background-container").prepend('<div class="hero-canvas" data-anime-type="home--popular-product"></div>'):$(n).find(".background-container").prepend('<div class="hero-canvas"></div>'),window.brands.anime.drawOnCanvas(n))},onTransitionEnd:function(e){e.activeIndex>0?e.unlockSwipeToPrev():e.lockSwipeToPrev(),$(".nodes").find(".node").each(function(o,n){o==e.activeIndex?($(n).addClass("active"),$(".red-container").css("height",40*o+"px")):$(n).removeClass("active")})},onSlideChangeEnd:function(e){window.brands.tracker&&window.brands.tracker.trackCarousel(e)},onSlideNextStart:function(e){4==e.activeIndex&&$(".home--screen5").scrollTo(5)}});$("div.node").on("click",function(e){var n=$(e.currentTarget).attr("data-swiper-index");n>0&&o.slideTo(n-1)}),$(".campaign-human").length>0&&$(".info").length>0&&$(".info").css({left:$(".campaign-human").offset().left+$(".campaign-human").width()}),$(".home--screen5").on("scroll",function(n){$(".home--screen5").closest(".swiper-slide-active").length>0&&($(".home--screen5").scrollTop()<5?($(e.header).removeClass("with-background"),o.slideTo(3)):$(".home--screen5").scrollTop()>20?$(e.header).addClass("with-background"):($(e.header).removeClass("with-background"),$(".js-go-top-parent-container").visible()?$(window).width()<=window.brands.mobile_screen&&$(e.shareBtnSelector).show():$(window).width()<=window.brands.mobile_screen&&$(e.shareBtnSelector).hide()))})})},e}();new Home;