"use strict";var $=require("jquery"),Swiper=require("swiper"),shared_1=require("./shared"),amplify=require("amplify"),_=require("underscore"),CompareProductsContainer=function(){function e(){this.loader=new shared_1.Loader,this.loaderWrapper=".loader",this.wrapperClassName=".js-compare-products",this.isFirstTwoSwiperItem=!1,this.utils=new shared_1.Utils,this.loader.show(this.loaderWrapper),this.initCarousel()}return e.prototype.initCarousel=function(){var e=this;$(document).ready(function(){var r=$(e.wrapperClassName).find(".compare-products-slide").find(".compare-products-info").find(".content").length;new Swiper(e.wrapperClassName,{loop:!1,nextButton:".swiper-next",prevButton:".swiper-prev",slidesPerView:4,paginationClickable:!0,spaceBetween:0,breakpoints:{767:{slidesPerView:2}},onInit:function(i){var n=Math.max.apply(null,$(".compare-products-info").map(function(e,r){return $(r).height()}).get());$(".compare-products-info").css("min-height",n),$(i.wrapper).css("opacity",1),$(i.wrapper).find(".swiper-slide").css("opacity",1),$(window).width()<=window.brands.mobile_screen&&r>1&&$(i.wrapper).parent().parent().find(".swiper-next, .swiper-prev").css("opacity",1),e.utils.compareProductAlignmentEqualizer(),e.loader.hide(e.loaderWrapper)},onSlideNextStart:function(e){if($(e.slides[e.activeIndex]).hasClass("compare-products-slide")){var i=e.activeIndex;r<4&&i+1==r&&(i-=.5)}},onSlidePrevStart:function(e){if($(e.slides[e.activeIndex]).hasClass("compare-products-slide")){var i=e.activeIndex;r<4&&i+1==r&&(i-=.5)}},onSlideChangeEnd:function(e){window.brands.tracker&&window.brands.tracker.trackCarousel(e)}}),$("a.btn-remove").each(function(r,i){$(i).on("click",function(r){var n=location.toString().replace(location.search,""),t=$(i).attr("data-product-unique-id"),o=amplify.store(e.utils.selectedProductComparisonKey),a=window.location.search.substring(1),s=a.split("&");for(var p in s){var d=s[p].toString().split("="),c=d[0],l=d[1].split(",");if("q"==c){if(l.indexOf(t)>-1){l.splice(l.indexOf(t),1);var u=_.filter(o,function(e){return e.id!=t});amplify.store(e.utils.selectedProductComparisonKey,u)}n+=n.indexOf("?")>-1?"&"+c+"="+encodeURIComponent(l.join(",")):"?"+c+"="+encodeURIComponent(l.join(","))}else n+=n.indexOf("?")>-1?"&"+c+"="+encodeURIComponent(l.join("")):"?"+c+"="+encodeURIComponent(l.join())}location.href=n})})})},e}();exports.CompareProductsContainer=CompareProductsContainer,new CompareProductsContainer;